import{c as h}from"./chunk-OJ7TKYNI.js";import{a as m}from"./chunk-PRKGXYQV.js";import{G as n,J as o,f as l,ib as p,sb as c}from"./chunk-OJEA5YKO.js";var C=(()=>{class s{constructor(t,e,r){this.authService=t,this.router=e,this.http=r,this.BACKEND_URL=m.apiUrl.replace(/\/api$/,""),this.photoCache=new Map,this.userImages={abdeladmin:"Abdel.jpg","abdel@hotmail.be":"Abdel.jpg",member1:"Clara.jpg","clara.dubois@digital-solutions.be":"Clara.jpg",member2:"Jon.jpg","jon.stevens@digital-solutions.be":"Jon.jpg",member3:"Nat.jpg","nathalie.martin@webdev-experts.be":"Nat.jpg",member4:"Isabelle.jpg","isabelle.leroy@design-studio.be":"Isabelle.jpg",member5:"Pierre.jpg","pierre.dupont@data-analytics.be":"Pierre.jpg",member6:"Maria.jpg","maria.garcia@cyber-security.be":"Maria.jpg"}}getProfileImage(t,e){if(!t&&!e)return"/assets/members/default.jpg";let r=t?t.toLowerCase():"",a=e?e.toLowerCase():"";if(a&&a.endsWith("@gmail.com"))return"/assets/members/google-default.jpg";let i=this.userImages[r];return!i&&a&&(i=this.userImages[a]),i?`/assets/members/${i}`:"/assets/members/default.jpg"}preloadImages(){return l(this,null,function*(){try{let t=[...Object.values(this.userImages),"default.jpg","google-default.jpg"];yield Promise.all(t.map(e=>l(this,null,function*(){if(!(yield fetch(`/assets/members/${e}`)).ok)throw new Error(`Failed to load ${e}`)})))}catch{}})}handleImageError(t){let e=t.target;e&&e.src!=="/assets/members/default.jpg"&&(e.src="/assets/members/default.jpg")}getProfileImageUrl(t,e){if(!e)return`${this.BACKEND_URL}/members/default.jpg`;if(this.photoCache.has(t))return this.photoCache.get(t);let r=Date.now(),a=`${this.BACKEND_URL}/members/${e}?t=${r}`;return this.photoCache.set(t,a),a}clearCache(t){this.photoCache.delete(t)}clearAllCache(){this.photoCache.clear()}uploadProfilePhoto(t){let e=new FormData;return e.append("photo",t),this.http.post(`${m.apiUrl}/users/profile/photo`,e)}static{this.\u0275fac=function(e){return new(e||s)(o(h),o(c),o(p))}}static{this.\u0275prov=n({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();export{C as a};
