<!-- 
  JOURNAL DE BORD - MODIFICATIONS DU DASHBOARD ADMIN
  
  Difficultés rencontrées :
  1. Affichage du prénom de l'admin :
     - Le prénom n'était pas correctement affiché
     - Le texte par défaut "Utilisateur" n'était pas approprié pour un admin
     
  2. Style du bouton de déconnexion :
     - Le bouton restait rouge malgré les modifications CSS
     - Conflit de styles avec d'autres règles CSS

  3. Photos de profil :
     - Les photos ne correspondaient pas aux profils des utilisateurs
     - Problème de génération d'avatars basés sur l'email
     - Solution : Utilisation du service imageService pour générer des avatars cohérents
     
  Solutions apportées :
  1. Pour le prénom :
     - Suppression de l'affichage du prénom pour plus de clarté
     - Ajout d'un badge "Administrateur" en vert pour identifier clairement le rôle
     
  2. Pour le bouton de déconnexion :
     - Utilisation de !important dans le CSS pour forcer le style vert
     - Ajout d'un style spécifique .logout-btn avec des propriétés importantes
     - Création d'un bouton rond et moderne avec une icône de déconnexion

  3. Pour les photos de profil :
     - Utilisation du service imageService pour générer des avatars uniques
     - L'avatar est généré à partir de l'email de l'utilisateur
     - Exemple d'utilisation : [src]="imageService.getProfileImage(member.email)"
  
  Code commenté :
  - Le badge administrateur utilise la classe .admin-badge avec un fond vert (#4CAF50)
  - Le bouton de déconnexion utilise .logout-btn avec !important sur les couleurs
  - L'icône de déconnexion utilise Font Awesome (fa-arrow-right-from-bracket)
  - Les avatars sont générés via imageService.getProfileImage()
-->

<div class="min-h-screen">
  <!-- Admin Dashboard Header -->
  <header class="admin-dashboard-header">
    <h1>Administration</h1>
    <div class="admin-profile">
      <img [src]="imageService.getProfileImage(currentUser?.mail || '')" 
           [alt]="currentUser?.firstName || 'Profile'"
           class="admin-avatar">
      <div class="admin-info">
        <div class="admin-email">{{ currentUser?.mail }}</div>
        <span class="admin-badge">Administrateur</span>
      </div>
      <button (click)="logout()" title="Déconnexion" class="logout-btn">
        <i class="fas fa-arrow-right-from-bracket"></i>
      </button>
    </div>
  </header>

  <!-- Stats Grid -->
  <div class="stats-grid">
    <div class="stat-card">
      <div class="stat-icon">
        <i class="fas fa-users"></i>
      </div>
      <div class="stat-info">
        <div class="stat-label">Membres Actifs</div>
        <div class="stat-value">{{ loading.members ? '...' : members.length }}</div>
      </div>
    </div>
    <div class="stat-card">
      <div class="stat-icon">
        <i class="fas fa-calendar"></i>
      </div>
      <div class="stat-info">
        <div class="stat-label">Événements à venir</div>
        <div class="stat-value">{{ loading.events ? '...' : events.length }}</div>
      </div>
    </div>
  </div>

  <!-- Members Section -->
  <section class="members-section">
    <h2>Derniers Membres</h2>
    
    <div class="members-grid">
      <!-- Loading State -->
      <div *ngIf="loading.members" class="loading-indicator">
        <i class="fas fa-spinner"></i>
        <span>Chargement des membres...</span>
      </div>
      
      <!-- Error State -->
      <div *ngIf="error.members" class="error-message">
        <span>{{ error.members }}</span>
        <button (click)="retry()" class="retry-btn">
          <i class="fas fa-sync"></i>
          Réessayer
        </button>
      </div>

      <!-- Members List -->
      <ng-container *ngIf="!loading.members && !error.members">
        <div *ngFor="let member of members" class="member-card">
          <img [src]="imageService.getProfileImage(member.email)" 
               [alt]="member.firstName" 
               class="member-avatar">
          <div class="member-info">
            <h3>{{ member.firstName }}</h3>
            <p class="member-email">{{ member.email }}</p>
            <p class="member-company">{{ member.company || 'Non spécifié' }}</p>
            <p class="member-date">Inscrit le {{ member.joinDate | date:'dd/MM/yyyy' }}</p>
            <div class="member-status" [class.active]="member.isActive">
              {{ member.isActive ? 'Actif' : 'Inactif' }}
            </div>
          </div>
        </div>
        
        <!-- No Data State -->
        <div *ngIf="members.length === 0" class="no-data">
          Aucun membre inscrit
        </div>
      </ng-container>
    </div>
  </section>
</div>

<style>
.dashboard-section {
  background: white;
  padding: 20px;
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.section-title {
  font-size: 1.25rem;
  font-weight: 600;
  margin-bottom: 1rem;
  color: #2d3748;
}

.members-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.member-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px;
  background: #f8f9fa;
  border-radius: 8px;
  transition: background-color 0.2s;
}

.member-item:hover {
  background: #f1f3f5;
}

.member-content {
  display: flex;
  align-items: center;
  gap: 12px;
}

.member-avatar {
  flex-shrink: 0;
}

.avatar-image {
  width: 48px;
  height: 48px;
  border-radius: 50%;
  object-fit: cover;
  border: 2px solid white;
  box-shadow: 0 1px 2px rgba(0,0,0,0.1);
}

.member-info {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.member-name {
  font-weight: 600;
  color: #2d3748;
}

.member-email {
  font-size: 0.875rem;
  color: #4a5568;
}

.member-date {
  font-size: 0.75rem;
  color: #718096;
}

.member-status {
  font-weight: 500;
  font-size: 0.875rem;
  padding: 4px 12px;
  border-radius: 16px;
  background: #e2e8f0;
  color: #4a5568;
}

.member-status.active {
  background: #c6f6d5;
  color: #2f855a;
}

@media (max-width: 640px) {
  .dashboard-section {
    padding: 16px;
  }

  .member-item {
    padding: 8px;
  }

  .avatar-image {
    width: 40px;
    height: 40px;
  }

  .member-info {
    font-size: 0.875rem;
  }

  .member-date {
    font-size: 0.75rem;
  }
}
</style> 